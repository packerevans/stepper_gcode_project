<!DOCTYPE html>
<html>
<head>
    <title>Sand Table Setup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; background: #222; color: #ddd; padding: 20px; }
        .card { background: #333; padding: 20px; border-radius: 10px; max-width: 400px; margin: 0 auto; }
        input, select, button { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 5px; border: none; }
        button { background: #d2b48c; font-weight: bold; cursor: pointer; }
        .network-item { padding: 10px; border-bottom: 1px solid #444; cursor: pointer; }
        .network-item:hover { background: #444; }
    </style>
</head>
<body>
    <div class="card">
        <div class="card">
    <h2>Wi-Fi Setup</h2>
    
    <div style="background: #eef; color: #333; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 5px solid #d2b48c;">
        <p style="margin:0; font-size: 0.9rem;"><strong>Current Hotspot Address:</strong> {{ ip_address }}:5000</p>
        <hr style="border: 0; border-top: 1px solid #ccc; margin: 10px 0;">
        <p style="margin:0; font-size: 0.9rem;">Once connected to home Wi-Fi, access this table at:</p>
        <h3 style="margin: 5px 0 0 0; color: #d2b48c;">http://{{ hostname }}.local:5000</h3>
    </div>

    <div id="network-list">
        {% for net in networks %}
        ```

### How it works for the user:

1.  **The User connects** to your "SandTableSetup" hotspot.
2.  **They see the page:**
    > **Current Hotspot Address:** 10.42.0.1:5000
    >
    > **Once connected to home Wi-Fi, access this table at:**
    > **[http://sandtable.local:5000](http://sandtable.local:5000)**
3.  **They enter their Wi-Fi credentials.**
4.  **The Pi reboots** and connects to their home router.
5.  **The User** disconnects from the hotspot, reconnects to their home Wi-Fi, and types `http://sandtable.local:5000` to start drawing.

### Next Step for You
Would you like me to help you write the **JavaScript for the "Connect" button** so that when the user clicks it, it shows a loading spinner and then displays a "Success! Reconnecting..." message before the Pi reboots?
        <p>Select a network to connect the Sand Table to the internet.</p>
        
        <div id="network-list">
            {% for net in networks %}
            <div class="network-item" onclick="selectNetwork('{{net.ssid}}')">
                <strong>{{net.ssid}}</strong> ({{net.signal}}%)
            </div>
            {% endfor %}
        </div>

        <div id="credentials" style="display:none; margin-top:20px;">
            <h3 id="selected-ssid"></h3>
            <input type="password" id="password" placeholder="Wi-Fi Password">
            <button onclick="connect()">Connect</button>
            <button onclick="location.reload()" style="background:#555; color:white;">Cancel</button>
        </div>
    </div>

    <script>
        let selectedSSID = "";

        function selectNetwork(ssid) {
            selectedSSID = ssid;
            document.getElementById('network-list').style.display = 'none';
            document.getElementById('credentials').style.display = 'block';
            document.getElementById('selected-ssid').innerText = ssid;
        }

        async function connect() {
            const pass = document.getElementById('password').value;
            const btn = document.querySelector('button');
            btn.innerText = "Connecting...";
            btn.disabled = true;

            const res = await fetch('/api/configure_wifi', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ ssid: selectedSSID, password: pass })
            });
            
            const data = await res.json();
            alert(data.message);
            if(data.success) {
                alert("Rebooting! Connect your device to the new Wi-Fi network.");
            } else {
                location.reload();
            }
        }
    </script>
</body>
</html>
